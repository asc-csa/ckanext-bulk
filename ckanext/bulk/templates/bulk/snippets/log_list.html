{#
Renders bulk operation logs as a structured table.

logs - List of log entries with fields: action, entity_type, entity_id, error (optional)
total - Total number of log entries
#}

{% if not logs %}
  <div class="empty-state">
    <p class="text-muted">
      <i class="fa fa-info-circle"></i>
      No operations performed yet. Logs will appear here after you submit the form.
    </p>
  </div>
{% else %}
  <div class="log-list-header">
    <p class="text-muted">
      Showing last <strong>{{ logs|length }}</strong>
      {% if total > logs|length %}
        of <strong>{{ total }}</strong>
      {% endif %}
      operation{{ 's' if logs|length != 1 else '' }}
    </p>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered table-condensed">
      <thead>
        <tr>
          <th style="width: 100px;">Status</th>
          <th style="width: 100px;">Action</th>
          <th style="width: 120px;">Entity Type</th>
          <th>Entity ID</th>
          <th>Error</th>
        </tr>
      </thead>
      <tbody>
        {% for log in logs %}
        <tr class="{% if log.error %}danger{% else %}success{% endif %}">
          <td>
            {% if log.error %}
              <i class="fa fa-times-circle text-danger"></i>
              <span class="text-danger">Failed</span>
            {% else %}
              <i class="fa fa-check-circle text-success"></i>
              <span class="text-success">Success</span>
            {% endif %}
          </td>
          <td>
            <span class="label label-default">{{ log.action|capitalize }}</span>
          </td>
          <td>{{ log.entity_type|capitalize }}</td>
          <td>
            <code style="font-size: 11px;">{{ log.entity_id }}</code>
          </td>
          <td>
            {% if log.error %}
              <span class="text-danger">{{ log.error }}</span>
            {% else %}
              <span class="text-muted">-</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% set success_count = logs|selectattr('error', 'undefined')|list|length %}
  {% set error_count = logs|length - success_count %}

  {% if logs|length > 0 %}
  <div class="log-summary">
    <p class="text-muted">
      <i class="fa fa-check-circle text-success"></i> {{ success_count }} succeeded
      {% if error_count > 0 %}
        &nbsp;&nbsp;
        <i class="fa fa-times-circle text-danger"></i> {{ error_count }} failed
      {% endif %}
    </p>
  </div>
  {% endif %}
{% endif %}
